import { getUserSocialLinks } from 'app/db';
import Image from 'next/image';
//deploy test
interface SocialLink {
  id: number;
  platform: string;
  url: string;
}

interface SocialLinksDisplayProps {
  userId: number;
}

// Social platform icons (SVG)
const SocialIcons = {
  facebook: (
    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
      <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
    </svg>
  ),
  X: (
    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
      <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
    </svg>
  ),
  bluesky: (
    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
      <path d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 2.105.139 3.107.139 5.394 1.027 8.448c.888 3.053 2.127 5.804 2.127 5.804 1.173-.914 2.857-1.706 4.84-2.292-1.979.583-3.659 1.375-4.84 2.292 0 0 1.348 2.707 2.127 5.804.888 3.053.888 5.34 1.651 6.343.659.838 1.664 1.16 4.301-.701 2.752-1.942 5.711-5.881 6.798-7.995 1.087 2.114 4.046 6.053 6.798 7.995 2.637 1.861 3.642 1.539 4.301.701.763-1.002.763-3.29 1.651-6.343.779-3.097 2.127-5.804 2.127-5.804-1.181.917-2.861 1.709-4.84 2.292 1.983-.586 3.667-1.378 4.84-2.292 0 0-1.239-2.751-2.127-5.804C23.861 5.394 23.861 3.107 23.098 2.105c-.659-.838-1.664-1.16-4.301.701-2.752 1.942-5.711 5.881-6.798 7.995z"/>
    </svg>
  ),
  instagram: (
    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
      <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
    </svg>
  ),
  threads: (
    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
      <path d="M12.186 24h-.007c-3.581-.024-6.334-1.205-8.184-3.509C2.35 18.44 1.5 15.586 1.472 12.01v-.017C1.5 8.417 2.35 5.563 3.995 3.512 5.845 1.208 8.598.027 12.179.003h.014c2.746.02 5.043.725 6.826 2.098 1.677 1.29 2.858 3.13 3.509 5.467l-2.04.569c-.542-1.891-1.488-3.322-2.812-4.256-1.434-1.100-3.377-1.704-5.746-1.704h-.006c-2.928.017-5.073.918-6.38 2.68-.874 1.178-1.35 2.83-1.373 4.776v.016c.023 1.946.499 3.598 1.373 4.776 1.307 1.762 3.452 2.663 6.38 2.68h.006c2.307 0 4.195-.546 5.613-1.622 1.182-.897 2.056-2.174 2.598-3.795l2.04.569c-.665 2.266-1.822 4.06-3.44 5.331-1.751 1.376-4.007 2.073-6.704 2.073z"/>
      <path d="M8.681 12.5c0-1.17.953-2.123 2.123-2.123s2.123.953 2.123 2.123-.953 2.123-2.123 2.123-2.123-.953-2.123-2.123zm8.5 0c0-1.17.953-2.123 2.123-2.123s2.123.953 2.123 2.123-.953 2.123-2.123 2.123-2.123-.953-2.123-2.123z"/>
    </svg>
  ),
  discord: (
    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
      <path d="M20.317 4.3698a19.7913 19.7913 0 00-4.8851-1.5152.0741.0741 0 00-.0785.0371c-.211.3753-.4447.8648-.6083 1.2495-1.8447-.2762-3.68-.2762-5.4868 0-.1636-.3933-.4058-.8742-.6177-1.2495a.077.077 0 00-.0785-.037 19.7363 19.7363 0 00-4.8852 1.515.0699.0699 0 00-.0321.0277C.5334 9.0458-.319 13.5799.0992 18.0578a.0824.0824 0 00.0312.0561c2.0528 1.5076 4.0413 2.4228 5.9929 3.0294a.0777.0777 0 00.0842-.0276c.4616-.6304.8731-1.2952 1.226-1.9942a.076.076 0 00-.0416-.1057c-.6528-.2476-1.2743-.5495-1.8722-.8923a.077.077 0 01-.0076-.1277c.1258-.0943.2517-.1923.3718-.2914a.0743.0743 0 01.0776-.0105c3.9278 1.7933 8.18 1.7933 12.0614 0a.0739.0739 0 01.0785.0095c.1202.099.246.1981.3728.2924a.077.077 0 01-.0066.1276 12.2986 12.2986 0 01-1.873.8914.0766.0766 0 00-.0407.1067c.3604.698.7719 1.3628 1.225 1.9932a.076.076 0 00.0842.0286c1.961-.6067 3.9495-1.5219 6.0023-3.0294a.077.077 0 00.0313-.0552c.5004-5.177-.8382-9.6739-3.5485-13.6604a.061.061 0 00-.0312-.0286zM8.02 15.3312c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9555-2.4189 2.157-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419-.0190 1.3332-.9555 2.4189-2.1569 2.4189zm7.9748 0c-1.1825 0-2.1569-1.0857-2.1569-2.419 0-1.3332.9554-2.4189 2.1569-2.4189 1.2108 0 2.1757 1.0952 2.1568 2.419 0 1.3332-.9460 2.4189-2.1568 2.4189Z"/>
    </svg>
  ),
  youtube: (
    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
      <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
    </svg>
  ),
  bilibili: (
    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
      <path d="M17.813 4.653h.854c1.51.054 2.769.578 3.773 1.574 1.004.995 1.524 2.249 1.56 3.76v7.36c-.036 1.51-.556 2.769-1.56 3.773s-2.262 1.524-3.773 1.56H5.333c-1.51-.036-2.769-.556-3.773-1.56S.036 18.858 0 17.347v-7.36c.036-1.511.556-2.765 1.56-3.76 1.004-.996 2.262-1.52 3.773-1.574h.774l-1.174-1.12a1.234 1.234 0 0 1-.373-.906c0-.356.124-.658.373-.907l.027-.027c.267-.249.573-.373.92-.373.347 0 .653.124.92.373L9.653 4.44c.071.071.134.142.187.213h4.267a.836.836 0 0 1 .16-.213l2.853-2.747c.267-.249.573-.373.92-.373.347 0 .662.151.929.4.267.249.391.551.391.907 0 .356-.124.657-.373.906zM5.333 7.24c-.746.018-1.373.276-1.88.773-.506.498-.769 1.13-.789 1.894v7.52c.02.765.283 1.396.789 1.894.507.498 1.134.756 1.88.773h13.334c.746-.017 1.373-.275 1.88-.773.506-.498.769-1.129.789-1.894v-7.52c-.02-.765-.283-1.396-.789-1.894-.507-.497-1.134-.755-1.88-.773zM8 11.107c.373 0 .684.124.933.373.25.249.383.569.4.96v1.173c-.017.391-.15.711-.4.96-.249.25-.56.374-.933.374s-.684-.125-.933-.374c-.25-.249-.383-.569-.4-.96V12.44c.017-.391.15-.711.4-.96.249-.249.56-.373.933-.373zm8 0c.373 0 .684.124.933.373.25.249.383.569.4.96v1.173c-.017.391-.15.711-.4.96-.249.25-.56.374-.933.374s-.684-.125-.933-.374c-.25-.249-.383-.569-.4-.96V12.44c.017-.391.15-.711.4-.96.249-.249.56-.373.933-.373z"/>
    </svg>
  ),
  twitch: (
    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
      <path d="M11.571 4.714h1.715v5.143H11.57zm4.715 0H18v5.143h-1.714zM6 0L1.714 4.286v15.428h5.143V24l4.286-4.286h3.428L22.286 12V0zm14.571 11.143l-3.428 3.428h-3.429l-3 3v-3H6.857V1.714h13.714Z"/>
    </svg>
  ),
  kofi: (
    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
      <path d="M23.881 8.948c-.773-4.085-4.859-4.593-4.859-4.593H.723c-.604 0-.679.798-.679.798s-.082 7.324-.033 11.316c.049 4.049 3.595 4.049 3.595 4.049s1.275.042 1.992.042c.717 0 1.992-.042 1.992-.042s3.546 0 3.595-4.049c.049-3.992-.033-11.316-.033-11.316s-.075-.798-.679-.798h18.199s-4.086.508-4.859 4.593c-.773 4.085 0 6.199 0 6.199s.508 1.695 2.32 1.695c1.812 0 2.32-1.695 2.32-1.695s.773-2.114 0-6.199zM7.842 15.320c-.456.456-1.077.456-1.077.456s-.621 0-1.077-.456c-.456-.456-.456-1.077-.456-1.077s0-.621.456-1.077c.456-.456 1.077-.456 1.077-.456s.621 0 1.077.456c.456.456.456 1.077.456 1.077s0 .621-.456 1.077z"/>
    </svg>
  ),
  buymeacoffee: (
    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
      <path d="M20.216 6.415l-.132-.666c-.119-.598-.388-1.163-.748-1.651-.36-.488-.82-.895-1.344-1.19-.524-.295-1.104-.482-1.696-.548L15.5 2.134c-.26-.03-.52-.044-.78-.044-.26 0-.52.015-.78.044l-.796.226c-.592.066-1.172.253-1.696.548-.524.295-.984.702-1.344 1.19-.36.488-.629 1.053-.748 1.651l-.132.666c-.119.598-.119 1.224 0 1.822.119.598.388 1.163.748 1.651.36.488.82.895 1.344 1.19.524.295 1.104.482 1.696.548l.796.226c.26.03.52.044.78.044.26 0 .52-.015.78-.044l.796-.226c.592-.066 1.172-.253 1.696-.548.524-.295.984-.702 1.344-1.19.36-.488.629-1.053.748-1.651.119-.598.119-1.224 0-1.822zM12 16.5c-4.418 0-8-3.582-8-8s3.582-8 8-8 8 3.582 8 8-3.582 8-8 8z"/>
    </svg>
  ),
  paypal: (
    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
      <path d="M7.076 21.337H2.47a.641.641 0 0 1-.633-.74L4.944.901C5.026.382 5.474 0 5.998 0h7.46c2.57 0 4.578.543 5.69 1.81 1.01 1.15 1.304 2.42 1.012 4.287-.023.143-.047.288-.077.437-.983 5.05-4.349 6.797-8.647 6.797h-2.19c-.524 0-.968.382-1.05.9l-1.12 7.106zm14.146-14.42a.3.3 0 0 1 .3-.3h.96a.3.3 0 0 1 .3.3v.96a.3.3 0 0 1-.3.3h-.96a.3.3 0 0 1-.3-.3v-.96z"/>
    </svg>
  ),
  github: (
    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
      <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
    </svg>
  ),
  gitlab: (
    <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
      <path d="M23.955 13.587l-1.342-4.135-2.664-8.189c-.135-.423-.73-.423-.867 0L16.418 9.452H7.582L4.919 1.263c-.135-.423-.73-.423-.867 0L1.388 9.452.045 13.587a.849.849 0 0 0 .308.95L12 23.054l11.647-8.516a.849.849 0 0 0 .308-.951z"/>
    </svg>
  ),
  paradoxmods: (
    <Image 
      src="/Icons/paradox-interactive.svg" 
      alt="Paradox Interactive" 
      width={20}
      height={20}
    />
  ),
};

const getPlatformLabel = (platform: string) => {
  const labels: Record<string, string> = {
    facebook: 'Facebook',
    X: 'X',
    bluesky: 'Bluesky',
    instagram: 'Instagram',
    threads: 'Threads',
    discord: 'Discord',
    youtube: 'YouTube',
    bilibili: 'Bilibili',
    twitch: 'Twitch',
    kofi: 'Ko-fi',
    buymeacoffee: 'Buy Me a Coffee',
    paypal: 'PayPal',
    github: 'GitHub',
    gitlab: 'GitLab',
    paradoxmods: 'Paradox Mods',
  };
  return labels[platform] || platform;
};

const getPlatformColor = (platform: string) => {
  const colors: Record<string, string> = {
    facebook: 'text-blue-600 hover:text-blue-800',
    X: 'text-gray-900 hover:text-gray-700',
    bluesky: 'text-sky-500 hover:text-sky-700',
    instagram: 'text-pink-600 hover:text-pink-800',
    threads: 'text-gray-900 hover:text-gray-700',
    discord: 'text-indigo-600 hover:text-indigo-800',
    youtube: 'text-red-600 hover:text-red-800',
    bilibili: 'text-pink-500 hover:text-pink-700',
    twitch: 'text-purple-600 hover:text-purple-800',
    kofi: 'text-blue-500 hover:text-blue-700',
    buymeacoffee: 'text-yellow-600 hover:text-yellow-800',
    paypal: 'text-blue-700 hover:text-blue-900',
    github: 'text-gray-900 hover:text-gray-700',
    gitlab: 'text-orange-600 hover:text-orange-800',
    paradoxmods: 'text-green-600 hover:text-green-800',
  };
  return colors[platform] || 'text-gray-600 hover:text-gray-800';
};

export async function SocialLinksDisplay({ userId }: SocialLinksDisplayProps) {
  const socialLinks = await getUserSocialLinks(userId);

  if (!socialLinks || socialLinks.length === 0) {
    return null;
  }

  return (
    <div className="mt-4">
      <h4 className="text-sm font-medium text-gray-700 dark:text-gray-300 mb-3">Social Links</h4>
      <div className="flex flex-wrap gap-3">
        {socialLinks.map((link) => (
          <a
            key={link.id}
            href={link.url}
            target="_blank"
            rel="noopener noreferrer"
            className={`flex items-center gap-2 px-3 py-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors ${getPlatformColor(link.platform)}`}
            title={`${getPlatformLabel(link.platform)}: ${link.url}`}
          >
            {SocialIcons[link.platform as keyof typeof SocialIcons] || (
              <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
                <path d="M12 0C5.373 0 0 5.373 0 12s5.373 12 12 12 12-5.373 12-12S18.627 0 12 0zm0 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10-4.477 10-10 10z"/>
              </svg>
            )}
            <span className="text-sm font-medium">{getPlatformLabel(link.platform)}</span>
          </a>
        ))}
      </div>
    </div>
  );
} 